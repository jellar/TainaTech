<div class="bg-primary text-white p-2" [class.bg-warning]="!isAddMode">
  <h5>{{isAddMode ? "Create" : "Edit"}} Person</h5>
</div>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="form-row">
    <div class="form-group col-4">
      <label>Gender</label>
      <select formControlName="gender" class="form-control"
              [ngClass]="{ 'is-invalid': submitted && form.controls['gender'].errors }">
        <option value="">Select Gender</option>
        <option *ngFor="let g of genderList">{{g}}</option>
      </select>
      <div *ngIf="submitted && form.controls['gender'].errors" class="invalid-feedback">
        <div *ngIf="form.controls['gender'].errors.required">Gender is required</div>
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-4">
      <label>First Name</label>
      <input type="text" formControlName="firstname" class="form-control"
             [ngClass]="{ 'is-invalid': submitted && form.controls['firstname'].errors }"/>
      <div *ngIf="submitted && form.controls['firstname'].errors" class="invalid-feedback">
        <div *ngIf="form.controls['firstname'].errors.required">First Name is required</div>
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-4">
      <label>Surname</label>
      <input type="text" formControlName="surname" class="form-control"
             [ngClass]="{ 'is-invalid': submitted && f.surname.errors }"/>
      <div *ngIf="submitted && f.surname.errors" class="invalid-feedback">
        <div *ngIf="f.surname.errors.required">Surname is required</div>
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col-4">
      <label>Email</label>
      <input type="text" formControlName="emailAddress" class="form-control"
             [ngClass]="{ 'is-invalid': submitted && f.emailAddress.errors }"/>
      <div *ngIf="submitted && f.emailAddress.errors" class="invalid-feedback">
        <div *ngIf="f.emailAddress.errors.required">Email is required</div>
        <div *ngIf="f.emailAddress.errors.email">Email must be a valid email address</div>
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-4">
      <label>Phone Number</label>
      <input type="text" formControlName="phoneNumber" class="form-control"
             [ngClass]="{ 'is-invalid': submitted && f.phoneNumber.errors }"/>
      <div *ngIf="submitted && f.phoneNumber.errors" class="invalid-feedback">
        <div *ngIf="f.phoneNumber.errors.required">Phone number is required</div>
        <div *ngIf="f.phoneNumber.errors.pattern">Please, Enter 10 digit Phone Number.</div>
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-4">
      <label>Date of Birth</label>
      <input type="date" formControlName="dateOfBirth" class="form-control" [ngModel]="dateOfBirth | date:'yyyy-MM-dd'"
             [ngClass]="{ 'is-invalid': submitted && f.dateOfBirth.errors }"/>
      <div *ngIf="submitted && f.dateOfBirth.errors" class="invalid-feedback">
        <div *ngIf="f.dateOfBirth.errors.required">Phone number is required</div>
      </div>
    </div>
  </div>

  <div class="form-group">

    <button type="submit" class="btn btn-primary m-1"
            [class.btn-warning]="!isAddMode" [disabled]="loading">
      <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
      {{isAddMode ? "Create" : "Save"}}
    </button>

    <button type="button" class="btn btn-secondary m-1" routerLink="/">
      Cancel
    </button>
  </div>
  <span class="text-danger">{{this.errors | json}}</span>

</form>
